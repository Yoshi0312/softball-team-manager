# 手動テストチェックリスト（ログイン→選手登録→メンバー表保存→成績保存→エクスポート）

## 事前準備
- テスト用アカウントでログイン可能であること。
- テスト対象チームに管理者または編集権限で参加済みであること。
- 既存データを保持したい場合は、先に「データをエクスポート」でバックアップを取得すること。

## 0. `index.html` inline `onclick` と `public/js/app.js` 公開関数の突合

### 推奨（自動チェック）
- [ ] リポジトリルートで次を実行し、`❌` が出ないことを確認する。
  - `node scripts/check-onclick-app-exports.mjs`
- [ ] 出力に `✅ onclick内の app.js 対象関数はすべて export 済みです` が含まれること。

### 代替（手動チェック）
- [ ] `public/index.html` の `onclick="..."` で呼ばれている関数名を列挙する（`switchTeam` / `logout` など app.js 管理外を除く）。
- [ ] `public/js/app.js` の `export { ... }` ブロックに、上記関数名がすべて含まれていることを確認する。
- [ ] 不一致がある場合、`index.html` 側か `app.js` 側のどちらかを修正して再確認する。

## 1. ログイン
- [ ] `/login.html` にアクセスし、メール/パスワードでログインできる。
- [ ] 認証後にチーム選択画面（または前回選択チームの画面）へ遷移する。
- [ ] ヘッダーにユーザー名が表示される。

## 2. 選手登録
- [ ] 「選手一覧を見る」→「選手追加」から必須項目（名前/背番号/メインポジション）を入力して保存できる。
- [ ] 保存後、選手一覧に新規選手が表示される。
- [ ] 追加した選手を再編集し、学年やメモなど任意項目が更新できる。

## 3. メンバー表保存
- [ ] 「新規メンバー表作成」を開き、大会名・試合日など必須項目を入力して保存できる。
- [ ] 保存後、保存済み一覧に対象メンバー表が表示される。
- [ ] 同一メンバー表を再編集して再保存できる。

## 4. 成績保存
- [ ] 保存済み画面から成績入力モーダルを開ける。
- [ ] 試合日・打席結果・投手成績を入力し保存できる。
- [ ] 保存後、成績一覧に対象試合が反映される。
- [ ] 統計ページの年・種別フィルタで保存した試合が集計対象になる。

## 4.1 分析ダッシュボード v1（追加チェック）

### 受け入れ条件（対象機能を固定）
- [ ] v1対象を次の4機能に固定し、画面上で表示・操作できることを確認する。
  - 勝率推移
  - 得失点差推移
  - 月次試合数
  - 選手比較（2〜3名）
- [ ] 年度フィルタ変更時、上記4機能すべてが同じ年度条件で再集計される。
- [ ] 試合種別フィルタ変更時、上記4機能すべてが同じ試合種別条件で再集計される。

### 除外範囲（今回の確認対象外）
- [ ] 以下は v1 受け入れ条件の対象外であることを明記し、テスト観点から除外する。
  - レーダーチャート
  - 対戦相手分析
  - PDF出力

### 回帰確認（既存タブ）
- [ ] `public/js/ui/pages/stats.js` の既存タブ `games` が従来どおり表示・操作できる（回帰なし）。
- [ ] `public/js/ui/pages/stats.js` の既存タブ `players` が従来どおり表示・操作できる（回帰なし）。

## 5. エクスポート
- [ ] 設定 > データ管理 で「データをエクスポート」を押下すると JSON ファイルをダウンロードできる。
- [ ] ダウンロードした JSON に `players` / `lineups` / `gameStats` / `settings` が含まれる。

## 6. 破壊的操作の導線確認
- [ ] 「データをインポート」実行時、上書き前の確認文にバックアップ推奨文言が表示される。
- [ ] 「全データを削除」実行時、取り消し不可の確認文に同じバックアップ推奨文言が表示される。

## 7. 完了条件（今回のリリース判定）
- [ ] ログイン → 選手登録 → メンバー表保存 → 成績保存 → エクスポートの一連フローで、致命的エラーが0件である。
- [ ] 途中で Firestore 書き込み失敗が起きた場合、`players` / `lineup` / `gameStats` / `settings` で同一のユーザー向けエラーメッセージが表示される。
